{"version":3,"sources":["utility/utility.js","components/loader/loader.jsx","context/UserContext.jsx","context/ChatContext.jsx","pages/Login.jsx","components/NavBar.jsx","components/Body.jsx","components/ChatCard.jsx","components/ChatHeader.jsx","components/ChatFooter.jsx","template/ChatHistory.jsx","template/ChatTemplate.jsx","template/UserProfileInfo.jsx","pages/MessagesPage.jsx","pages/Register.jsx","pages/Setting.jsx","routes/authRoute.jsx","routes/routes.jsx","utility/SocketProvider.jsx","App.js","serviceWorker.js","index.js"],"names":["useForm","initialValues","useState","values","setValues","e","target","name","value","Loader","msg","className","UserContext","createContext","user","isLoggedin","isAdmin","setUser","setIsLoggedin","setIsAdmin","ChatContext","chat","receiver","chatList","setChat","setReceiver","setChatList","Login","useContext","email","password","error","setError","isFetching","setIsFetching","history","useHistory","from","useLocation","state","pathname","onSubmitForm","a","preventDefault","config","headers","Axios","post","res","status","data","replace","response","message","onSubmit","xmlns","viewBox","fill","fillRule","d","clipRule","type","placeholder","onChange","to","NavBar","isOpen","setIsOpen","onLogout","axios","get","push","console","log","onClick","stroke","strokeLinecap","strokeLinejoin","strokeWidth","style","backgroundColor","minHeight","Body","children","ChatCard","loadChat","_id","login","src","profile_img","alt","lastMsg","time","date","Date","getHours","getMinutes","timeFormater","send_Date","sender","body","ChatHeader","ChatFooter","setMsg","onSendMsg","length","obj","Math","floor","random","chat_id","now","messages","ChatHistory","search","setSearch","searchBox","setSearchbox","resualt","setResulat","userSeggestions","setUserSuggestion","onLoadChatHistory","window","innerWidth","onLoadChatById","onLoadUserSeggestions","users","onSearch","onLoadChatByUser","useEffect","background","height","onFocus","maxHeight","map","item","key","ChatTemplate","id","maxWidth","width","display","UserProfileInfo","phone","location","MessagesPage","Register","cPassword","autoComplete","Setting","fetching","setFetching","file","setFile","preview","setPreveiew","htmlFor","bio","formData","FormData","append","then","catch","err","saveChanges","files","URL","createObjectURL","AuthRoute","rest","render","Routes","path","exact","SocketContext","React","SocketProvider","socket","setSocket","newSocket","io","query","close","on","newChatList","filter","activeChat","find","unshift","addMessageToChatList","addMessageToActiveChat","emit","chatMsg","i","includes","handleMessageStatusUpdate","off","Provider","App","Boolean","hostname","match","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d5cb41bf.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\n\r\nexport const useForm = (initialValues) => {\r\n  const [values, setValues] = useState(initialValues);\r\n\r\n  return [\r\n    values,\r\n    (e) =>\r\n      setValues({\r\n        ...values,\r\n        [e.target.name]: e.target.value,\r\n      }),\r\n  ];\r\n};\r\n","import React from \"react\";\r\nimport \"./loader.css\";\r\n\r\nexport default function Loader({ msg }) {\r\n  return (\r\n    <div className=\"loading\">\r\n      <div className=\"loadingio-spinner-eclipse-tl18qrapo1f\">\r\n        <div className=\"ldio-u6wmgzlxuh9\">\r\n          <div></div>\r\n        </div>\r\n      </div>\r\n      {msg && <h1>{msg}</h1>}\r\n    </div>\r\n  );\r\n}\r\n","import React, { createContext } from \"react\";\r\n\r\nexport const UserContext = createContext({\r\n  user: {},\r\n  isLoggedin: false,\r\n  isAdmin: false,\r\n  setUser: () => {},\r\n  setIsLoggedin: () => {},\r\n  setIsAdmin: () => {},\r\n});\r\n","import react, { createContext } from \"react\";\r\n\r\nexport const ChatContext = createContext({\r\n  chat: {},\r\n  receiver: {},\r\n  chatList: [],\r\n  setChat: () => {},\r\n  setReceiver: () => {},\r\n  setChatList: () => {},\r\n});\r\n","import Axios from \"axios\";\r\nimport React, { useContext, useState } from \"react\";\r\nimport { NavLink, useHistory, useLocation } from \"react-router-dom\";\r\n\r\nimport { useForm } from \"../utility/utility\";\r\nimport Loader from \"../components/loader/loader\";\r\nimport { UserContext } from \"../context\";\r\n\r\nexport function Login() {\r\n  const { setIsLoggedin, setUser, setIsAdmin } = useContext(UserContext);\r\n  const [values, setValues] = useForm({ email: \"\", password: \"\" });\r\n  const [error, setError] = useState(\"\");\r\n  const [isFetching, setIsFetching] = useState(false);\r\n\r\n  let history = useHistory();\r\n  let location = useLocation();\r\n\r\n  let { from } = location.state || { from: { pathname: \"/messages\" } };\r\n\r\n  const onSubmitForm = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      setIsFetching(true);\r\n      // Headers\r\n      const config = {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      };\r\n\r\n      const res = await Axios.post(\"/api/v1/user/login\", values, config);\r\n      if (res.status === 200 && res.data.user) {\r\n        setUser(res.data.user);\r\n        setIsLoggedin(true);\r\n        // setIsAdmin(res.user.isAdmin)\r\n        history.replace(from);\r\n      }\r\n      setIsFetching(false);\r\n    } catch (error) {\r\n      // console.log(error.response);\r\n      if (error.response && error.response.status === 400) {\r\n        setError(error.response.data.message);\r\n      }\r\n      setIsFetching(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"mt-4 mx-auto flex justify-center items-center text-gray-600\">\r\n      <div className=\"mx-8\">\r\n        <h1 className=\"font-bold text-4xl ml-4\">Login</h1>\r\n        <form className=\"my-4\" onSubmit={(e) => onSubmitForm(e)}>\r\n          <div className=\"flex flex-row items-center bg-white border-2 border-gray-200 py-2 px-3 mb-1 mt-4 rounded-md\">\r\n            <svg\r\n              className=\"w-5 flex-none text-gray-400\"\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              viewBox=\"0 0 20 20\"\r\n              fill=\"currentColor\"\r\n            >\r\n              <path\r\n                fillRule=\"evenodd\"\r\n                d=\"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z\"\r\n                clipRule=\"evenodd\"\r\n              />\r\n            </svg>\r\n            <input\r\n              type=\"email\"\r\n              placeholder=\"Enter email\"\r\n              className=\"w-44 bg-transparent outline-none ml-2 text-sm\"\r\n              onChange={(e) => setValues(e)}\r\n              name=\"email\"\r\n            />\r\n          </div>\r\n          <small className=\"text-gray-400 text-xs\">\r\n            We'll never share your email with anyone else.\r\n          </small>\r\n          <div className=\"flex flex-row items-center bg-white border-2 border-gray-200 py-2 px-3 mb-2 mt-4 rounded-md\">\r\n            <svg\r\n              className=\"w-5 flex-none text-gray-400\"\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              viewBox=\"0 0 20 20\"\r\n              fill=\"currentColor\"\r\n            >\r\n              <path\r\n                fillRule=\"evenodd\"\r\n                d=\"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z\"\r\n                clipRule=\"evenodd\"\r\n              />\r\n            </svg>\r\n            <input\r\n              onChange={(e) => setValues(e)}\r\n              type=\"password\"\r\n              name=\"password\"\r\n              placeholder=\"Enter password\"\r\n              className=\"w-44 bg-transparent outline-none ml-2 text-sm\"\r\n            />\r\n          </div>\r\n          <small className=\"h-16 text-xs text-red-400\">{error}</small>\r\n          {isFetching ? (\r\n            <Loader />\r\n          ) : (\r\n            <button\r\n              className=\"block mt-4 text-center p-2 w-48 bg-purple-600 rounded-md text-white m-auto\"\r\n              type=\"submit\"\r\n            >\r\n              connect\r\n            </button>\r\n          )}\r\n          <p className=\"text-xs text-gray-400 m-4 text-center\">\r\n            Dont have an account\r\n            <NavLink className=\"text-purple-700 mr-2\" to=\"/register\">\r\n              Creat an account\r\n            </NavLink>\r\n          </p>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import axios from \"axios\";\r\nimport React, { useContext } from \"react\";\r\nimport { UserContext } from \"../context\";\r\nimport { NavLink, useHistory } from \"react-router-dom\";\r\nimport { useState } from \"react\";\r\nimport \"../style/nav.css\";\r\n\r\nexport function NavBar() {\r\n  const { setIsAdmin, setUser, setIsLoggedin } = useContext(UserContext);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const history = useHistory();\r\n\r\n  const onLogout = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const res = await axios.get(\"/api/v1/user/logout\");\r\n      if (res.status === 200) {\r\n        history.push(\"/login\");\r\n        setUser(null);\r\n        setIsLoggedin(false);\r\n        setIsAdmin(false);\r\n      }\r\n    } catch (error) {\r\n      console.log(error.response);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <header className=\"md:hidden\">\r\n        {!isOpen ? (\r\n          <svg\r\n            onClick={() => setIsOpen(true)}\r\n            className=\"cursor-pointer w-6 h-6 absolute top-2 right-4\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth={2}\r\n              d=\"M4 8h16M4 16h16\"\r\n            />\r\n          </svg>\r\n        ) : (\r\n          <svg\r\n            onClick={() => setIsOpen(false)}\r\n            className=\"cursor-pointer w-6 h-6 absolute top-2 right-4\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            viewBox=\"0 0 20 20\"\r\n            fill=\"currentColor\"\r\n          >\r\n            <path\r\n              fillRule=\"evenodd\"\r\n              d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\"\r\n              clipRule=\"evenodd\"\r\n            />\r\n          </svg>\r\n        )}\r\n      </header>\r\n      <nav\r\n        style={{ backgroundColor: \"#050646\", minHeight: \"400px\" }}\r\n        className={`z-50 fixed ${isOpen ? \"left-2\" : \"-left-20\"}\r\n        md:h-auto md:static flex-none flex py-8 rounded-xl shadow-md w-16 flex-col justify-between items-center`}\r\n      >\r\n        <div className=\"flex flex-col space-y-8\">\r\n          <NavLink to=\"/messages\">\r\n            <div className=\"mx-auto w-6 h-6 rounded-md text-gray-100\">\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                viewBox=\"0 0 20 20\"\r\n                fill=\"currentColor\"\r\n              >\r\n                <path d=\"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z\" />\r\n              </svg>\r\n            </div>\r\n            <div className=\"text-center text-xs mt-1 text-gray-200\">Home</div>\r\n          </NavLink>\r\n          {/* Calender */}\r\n          {/* <div>\r\n          <div className=\"mx-auto w-6 h-6 rounded-md text-gray-100\">\r\n            <svg\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              viewBox=\"0 0 20 20\"\r\n              fill=\"currentColor\"\r\n            >\r\n              <path\r\n                fillRule=\"evenodd\"\r\n                d=\"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z\"\r\n                clipRule=\"evenodd\"\r\n              />\r\n            </svg>\r\n          </div>\r\n          <div className=\"text-center text-xs mt-1 text-gray-200\">calender</div>\r\n        </div> */}\r\n          {/* end Calender */}\r\n          {/* Messages */}\r\n          {/* <div>\r\n          <div className=\"mx-auto w-6 h-6 rounded-md text-gray-100\">\r\n            <svg\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              viewBox=\"0 0 20 20\"\r\n              fill=\"currentColor\"\r\n            >\r\n              <path d=\"M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z\" />\r\n              <path d=\"M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z\" />\r\n            </svg>\r\n          </div>\r\n          <div className=\"text-center text-xs mt-1 text-gray-200\">messages</div>\r\n        </div> */}\r\n          {/* end Messages */}\r\n          <NavLink to=\"/setting\">\r\n            <div className=\"mx-auto w-6 h-6 rounded-md text-gray-100\">\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                viewBox=\"0 0 20 20\"\r\n                fill=\"currentColor\"\r\n              >\r\n                <path\r\n                  fillRule=\"evenodd\"\r\n                  d=\"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z\"\r\n                  clipRule=\"evenodd\"\r\n                />\r\n              </svg>\r\n            </div>\r\n            <div className=\"text-center text-xs mt-1 text-gray-200\">\r\n              Setting\r\n            </div>\r\n          </NavLink>\r\n        </div>\r\n        <div>\r\n          <div\r\n            className=\"cursor-pointer hover:bg-blue-900\"\r\n            onClick={(e) => onLogout(e)}\r\n          >\r\n            <div className=\"mx-auto w-6 h-6 rounded-md text-gray-100\">\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                viewBox=\"0 0 20 20\"\r\n                fill=\"currentColor\"\r\n              >\r\n                <path\r\n                  fillRule=\"evenodd\"\r\n                  d=\"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z\"\r\n                  clipRule=\"evenodd\"\r\n                />\r\n              </svg>\r\n            </div>\r\n            <div className=\"text-center text-xs mt-1  text-gray-200\">\r\n              logout\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport function Body({ children }) {\r\n  return (\r\n    <main className=\"bg-gray-100\">\r\n      <div className=\"relative flex p-3 md:space-x-2 min-h-screen\">\r\n        {children}\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport function ChatCard({ user, data, loadChat }) {\r\n  const timeFormater = (time) => {\r\n    const date = new Date(time);\r\n    return `${date.getHours()}:${date.getMinutes()}`;\r\n  };\r\n  return (\r\n    <div\r\n      className=\"bg-white rounded-lg p-2 my-2 cursor-pointer\"\r\n      onClick={() => loadChat(data._id)}\r\n    >\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center space-x-2\">\r\n          <div\r\n            className={`w-2 h-2 ${\r\n              data.receiver.login ? \"bg-red-400\" : \"bg-transparent\"\r\n            } rounded-full`}\r\n          ></div>\r\n          <div className=\"w-8 h-8 rounded-full overflow-hidden\">\r\n            <img\r\n              src={data.receiver.profile_img}\r\n              className=\"object-cover h-8 w-8\"\r\n              alt={`${data.receiver.name} profile pic`}\r\n            />\r\n          </div>\r\n          <div>\r\n            <div className=\"font-bold text-gray-600\">{data.receiver.name}</div>\r\n            <div className=\"text-xs text-gray-400\">online</div>\r\n          </div>\r\n        </div>\r\n        {data.lastMsg && (\r\n          <div className=\"text-xs text-gray-400\">\r\n            {timeFormater(data.lastMsg.send_Date)}\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className=\"flex flex-row items-start justify-between px-4 py-2\">\r\n        <div className=\"text-xs text-gray-500 \">\r\n          {data.lastMsg\r\n            ? data.lastMsg.sender === user._id\r\n              ? `You: ${data.lastMsg.body}`\r\n              : data.lastMsg.body\r\n            : `Say hi to ${data.receiver.name}`}\r\n        </div>\r\n        <div className=\"w-4 h-4 text-gray-400\">\r\n          {data.lastMsg ? (\r\n            data.lastMsg.status === \"sending\" ? (\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                fill=\"none\"\r\n                viewBox=\"0 0 24 24\"\r\n                stroke=\"currentColor\"\r\n              >\r\n                <path\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                  strokeWidth={2}\r\n                  d=\"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z\"\r\n                />\r\n              </svg>\r\n            ) : null\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useContext } from \"react\";\r\nimport { ChatContext } from \"../context\";\r\n\r\nexport function ChatHeader({ receiver }) {\r\n  const { setChat } = useContext(ChatContext);\r\n\r\n  return (\r\n    <div className=\"h-20 px-4 border-b-2 flex flex-row flex-none justify-between items-center relative\">\r\n      <div className=\"flex flex-row items-center\">\r\n        <div className=\"w-10 h-10 flex-none rounded-full overflow-hidden\">\r\n          <img\r\n            src={receiver.profile_img}\r\n            className=\"object-cover h-10 w-10\"\r\n            alt=\"\"\r\n          />\r\n        </div>\r\n        <div className=\"ml-2\">\r\n          <div className=\"text-lg font-bold text-gray-600\">{receiver.name}</div>\r\n          <div className=\"text-xs text-gray-400\">Last seen 1 day ago</div>\r\n        </div>\r\n      </div>\r\n      <div className=\"space-x-2 flex flex-row items-center\">\r\n        <div className=\"cursor-pointer w-8 h-8 rounded-full border flex items-center justify-center\">\r\n          <svg\r\n            className=\"w-5 text-gray-500\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            viewBox=\"0 0 20 20\"\r\n            fill=\"currentColor\"\r\n          >\r\n            <path d=\"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z\" />\r\n          </svg>\r\n        </div>\r\n        <div\r\n          className=\"cursor-pointer w-8 h-8 rounded-full border flex items-center justify-center\"\r\n          onClick={() => setChat(null)}\r\n        >\r\n          <svg\r\n            className=\"w-4 text-gray-500\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            viewBox=\"0 0 20 20\"\r\n            fill=\"currentColor\"\r\n          >\r\n            <path\r\n              fillRule=\"evenodd\"\r\n              d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\"\r\n              clipRule=\"evenodd\"\r\n            />\r\n          </svg>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import axios from \"axios\";\r\nimport React, { useContext, useState } from \"react\";\r\nimport { ChatContext, UserContext } from \"../context\";\r\n\r\nexport function ChatFooter() {\r\n  const [msg, setMsg] = useState(\"\");\r\n  const { chat, setChat, setChatList, chatList } = useContext(ChatContext);\r\n  const { user } = useContext(UserContext);\r\n  const onSendMsg = async (e) => {\r\n    e.preventDefault();\r\n    if (msg.length === 0) return;\r\n    try {\r\n      const obj = {\r\n        _id: \"msg\" + Math.floor(Math.random() * 10000),\r\n        chat_id: chat._id,\r\n        body: msg,\r\n        sender: user._id,\r\n        send_Date: Date.now(),\r\n        status: \"sending\",\r\n      };\r\n      setChat({ ...chat, messages: [...chat.messages, obj] });\r\n      setMsg(\"\");\r\n      const res = await axios.post(\"/api/v1/chat/message\", obj);\r\n      if (res.status === 201) {\r\n        // display the recent chat in the top of the chat history\r\n        // const newChatList = chatList.filter((item) => item._id !== chat._id);\r\n        // const activeChat = chatList.find((item) => item._id === chat._id);\r\n        // activeChat.lastMsg = res.data;\r\n        // newChatList.unshift(activeChat);\r\n        // setChatList(newChatList);\r\n        console.log(\"msg saved\");\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form className=\" bg-white border-t-2 flex flex-row items-center space-x-4 h-16 px-2\">\r\n      <div className=\"hidden md:flex cursor-pointer w-8 h-8 rounded-full border  items-center justify-center\">\r\n        <svg\r\n          className=\"w-4 text-gray-500\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          viewBox=\"0 0 20 20\"\r\n          fill=\"currentColor\"\r\n        >\r\n          <path\r\n            fillRule=\"evenodd\"\r\n            d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\"\r\n            clipRule=\"evenodd\"\r\n          />\r\n        </svg>\r\n      </div>\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"write a message\"\r\n        className=\"flex-auto outline-none\"\r\n        onChange={(e) => setMsg(e.target.value)}\r\n        value={msg}\r\n      />\r\n\r\n      <div className=\"hidden md:flex  cursor-pointer w-8 h-8 rounded-full border  items-center justify-center\">\r\n        <svg\r\n          className=\"hidden md:block w-4 text-gray-500\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          fill=\"none\"\r\n          viewBox=\"0 0 24 24\"\r\n          stroke=\"currentColor\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            strokeWidth=\"2\"\r\n            d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\"\r\n          />\r\n        </svg>\r\n      </div>\r\n      <svg\r\n        className=\" cursor-pointer w-6 text-gray-500\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        viewBox=\"0 0 20 20\"\r\n        fill=\"currentColor\"\r\n      >\r\n        <path d=\"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z\" />\r\n      </svg>\r\n      <button\r\n        type=\"submit\"\r\n        style={{ backgroundColor: \"#4c60f2\" }}\r\n        className=\"outline-none cursor-pointer w-10 h-10 shadow-lg rounded-full border flex flex-none items-center justify-center\"\r\n        onClick={(e) => onSendMsg(e)}\r\n      >\r\n        <svg\r\n          className=\"w-5 text-white rotate-90 transform\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          viewBox=\"0 0 20 20\"\r\n          fill=\"currentColor\"\r\n        >\r\n          <path d=\"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z\" />\r\n        </svg>\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n","import axios from \"axios\";\r\nimport React, { useContext, useState, useEffect } from \"react\";\r\nimport { ChatCard } from \"../components\";\r\nimport { ChatContext, UserContext } from \"../context\";\r\n\r\nexport function ChatHistory() {\r\n  const { setChat, setChatList, setReceiver, chatList } = useContext(\r\n    ChatContext\r\n  );\r\n  const { user } = useContext(UserContext);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [searchBox, setSearchbox] = useState(false);\r\n\r\n  const [resualt, setResulat] = useState([]);\r\n  const [userSeggestions, setUserSuggestion] = useState([]);\r\n  // const limit = 10;\r\n  // const [offset, setOffset] = useState(0);\r\n\r\n  const onLoadChatHistory = async () => {\r\n    const limit = 10;\r\n    const offset = 1;\r\n    try {\r\n      const res = await axios.get(\r\n        `/api/v1/chat?limit=${limit}&offset=${offset}`\r\n      );\r\n      if (res.status === 200) {\r\n        setChatList(res.data);\r\n        // set the first chat as active chat\r\n        if (res.data.length !== 0 && window.innerWidth >= 768) {\r\n          onLoadChatById(res.data[0]._id);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  const onLoadUserSeggestions = async () => {\r\n    try {\r\n      const res = await axios.get(`/api/v1/user/suggestion`);\r\n      if (res.status === 200) {\r\n        setUserSuggestion(res.data.users);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const onSearch = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const res = await axios.post(\"/api/v1/user/search\", { search });\r\n      if (res.status === 200) {\r\n        setResulat(res.data.users);\r\n      }\r\n    } catch (error) {\r\n      console.log(error.response);\r\n    }\r\n  };\r\n  const onLoadChatByUser = async (_id) => {\r\n    try {\r\n      const res = await axios.get(`/api/v1/chat/receiver/${_id}`);\r\n      if (res.status === 200) {\r\n        setChat(res.data);\r\n        setResulat([]);\r\n      }\r\n      setResulat([]);\r\n    } catch (error) {\r\n      console.log(error.response);\r\n    }\r\n  };\r\n  const onLoadChatById = async (_id) => {\r\n    const limit = 10;\r\n    const offset = 0;\r\n    try {\r\n      const res = await axios.get(\r\n        `/api/v1/chat/${_id}?limit=${limit}&offset=${offset}`\r\n      );\r\n      if (res.status === 200) {\r\n        setChat(res.data);\r\n        setReceiver(res.data.receiver);\r\n        setResulat([]);\r\n      }\r\n      setResulat([]);\r\n    } catch (error) {\r\n      console.log(error.response);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    onLoadChatHistory();\r\n    onLoadUserSeggestions();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {searchBox && (\r\n        <div\r\n          className=\"absolute top-0 left-0 z-40 h-full w-full\"\r\n          style={{ background: \"#00000033\" }}\r\n          onClick={() => setSearchbox(false)}\r\n        ></div>\r\n      )}\r\n      <div\r\n        className=\"mt-8 md:mt-0 w-full md:w-72 h-full overflow-auto flex-none\"\r\n        style={{ height: \"calc(100vh - 2rem)\" }}\r\n      >\r\n        <div className=\"relative mx-2 z-40\">\r\n          <form\r\n            onSubmit={(e) => onSearch(e)}\r\n            className=\"flex flex-row items-center bg-white border-2 border-gray-200 py-2 px-3  rounded-md\"\r\n          >\r\n            <button type=\"submit\" className=\"cursor-pointer\">\r\n              <svg\r\n                className=\"w-5 flex-none text-gray-400\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                viewBox=\"0 0 20 20\"\r\n                fill=\"currentColor\"\r\n              >\r\n                <path\r\n                  fillRule=\"evenodd\"\r\n                  d=\"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z\"\r\n                  clipRule=\"evenodd\"\r\n                />\r\n              </svg>\r\n            </button>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search...\"\r\n              className=\"bg-transparent outline-none ml-2 text-sm w-full\"\r\n              onChange={(e) => setSearch(e.target.value)}\r\n              onFocus={() => setSearchbox(true)}\r\n            />\r\n          </form>\r\n          {resualt.length !== 0 && (\r\n            <ul\r\n              className=\" bg-white border-2 border-gray-200  rounded-md shadow-lg absolute w-full mt-1 overflow-y-auto\"\r\n              style={{ maxHeight: \"200px\" }}\r\n            >\r\n              {resualt.map((item) => (\r\n                <li\r\n                  key={`search_user_${item._id}`}\r\n                  className=\"cursor-pointer hover:bg-gray-100 py-2 px-3 \"\r\n                  onClick={() => {\r\n                    setSearchbox(false);\r\n                    onLoadChatByUser(item._id);\r\n                  }}\r\n                >\r\n                  <div className=\"text-gray-600\">{item.name}</div>\r\n                  <div className=\"text-sm text-gray-400\">{item.email}</div>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n        <section className=\"pl-2 pt-4\">\r\n          <div className=\"flex flex-row items-center mb-4 space-x-3\">\r\n            <h2 className=\"font-bold text-3xl\">Inbox</h2>\r\n            <div className=\"text-xs border text-red-400 border-red-400 bg-red-100 rounded-full px-2 py-1 font-bold\">\r\n              4 new\r\n            </div>\r\n          </div>\r\n          {user && <div className=\"m-4\">{user.name}</div>}\r\n          <div>\r\n            {chatList.length !== 0 &&\r\n              chatList.map((item) => (\r\n                <ChatCard\r\n                  key={item._id}\r\n                  data={item}\r\n                  loadChat={onLoadChatById}\r\n                  user={user}\r\n                />\r\n              ))}\r\n          </div>\r\n          {userSeggestions.length !== 0 && (\r\n            <div>\r\n              <h1 className=\"font-bold mb-4 text-gray-900 text-sm pb-1 border-b-2 border-gray-600\">\r\n                suggestions\r\n              </h1>\r\n              {userSeggestions.map((item) => (\r\n                <div\r\n                  onClick={() => onLoadChatByUser(item._id)}\r\n                  className=\"flex flex-row items-center cursor-pointer hover:bg-gray-200 p-2 transition-colors space-x-2 my-1\"\r\n                >\r\n                  <div className=\"w-8 h-8 rounded-full overflow-hidden\">\r\n                    <img\r\n                      src={item.profile_img}\r\n                      alt={`${item.name} profile picture`}\r\n                      className=\"w-8 h-8 object-cover\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"text-gray-600\">{item.name}</div>\r\n                    <div className=\"text-sm text-gray-400\">{item.email}</div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </section>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport { ChatFooter, ChatHeader } from \"../components\";\r\nimport { UserContext } from \"../context\";\r\nimport ScrollToBottom from \"react-scroll-to-bottom\";\r\n\r\nexport function ChatTemplate({ chat }) {\r\n  const { user } = useContext(UserContext);\r\n\r\n  const timeFormater = (time) => {\r\n    const date = new Date(time);\r\n    return `${date.getHours()}:${date.getMinutes()}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col absolute z-40 md:z-20 top-0 left-0 h-full w-full md:w-auto md:relative rounded-md bg-white border-none md:border-2 border-gray-200 flex-auto md:h-auto\">\r\n      {chat.receiver && <ChatHeader receiver={chat.receiver} />}\r\n\r\n      <div\r\n        id=\"chat_body\"\r\n        style={{ height: \"calc(100vh - 11rem)\" }}\r\n        className=\" flex-auto\"\r\n      >\r\n        <ScrollToBottom className=\"w-full h-full\">\r\n          {/* <div className=\"w-20 border rounded-full text-center text-sm bg-gray-100 text-gray-500 font-bold py-1 mx-auto my-2\">\r\n            18 jun\r\n          </div> */}\r\n          {chat.messages.length !== 0 ? (\r\n            chat.messages.map((msg) => (\r\n              <div\r\n                key={msg._id}\r\n                className={\r\n                  msg.sender === user._id\r\n                    ? `my-2 cursor-pointer flex flex-row-reverse items-start ${\r\n                        msg.status === \"sending\" && \"opacity-50\"\r\n                      }`\r\n                    : \"my-2 cursor-pointer flex flex-row items-start\"\r\n                }\r\n              >\r\n                <div className=\"w-8 h-8 rounded-full overflow-hidden mx-2\">\r\n                  <img\r\n                    src={\r\n                      msg.sender === user._id\r\n                        ? user.profile_img\r\n                        : chat.receiver.profile_img\r\n                    }\r\n                    className=\"object-cover h-8 w-8\"\r\n                    alt=\"\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <div\r\n                    className=\"border rounded-md bg-gray-100 text-gray-400 py-1 px-2 \"\r\n                    style={{ maxWidth: \"16rem\", width: \"fit-content\" }}\r\n                  >\r\n                    {msg.body}\r\n                  </div>\r\n                  <div\r\n                    className={\r\n                      msg.sender === user._id\r\n                        ? \"text-xs text-gray-500 pt-2 text-right\"\r\n                        : \"text-xs text-gray-500 pt-2\"\r\n                    }\r\n                    style={{ display: \"none\" }}\r\n                  >\r\n                    {timeFormater(msg.send_Date)}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <div className=\"text-center text-smtext-gray-500 font-bold my-2\">\r\n              {`Say hi to ${chat.receiver.name}`}\r\n            </div>\r\n          )}\r\n        </ScrollToBottom>\r\n      </div>\r\n\r\n      <ChatFooter />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function UserProfileInfo({ receiver }) {\r\n  return (\r\n    <div className=\"hidden xl:block absolute right-0 top-0 shadow-2xl xl:static rounded-md xl:shadow-none w-full bg-white border-2 md:w-80\">\r\n      {/* <!-- profile header --> */}\r\n      <div className=\"h-20 border-b-2 py-2 px-4 flex justify-between items-center\">\r\n        <div className=\"font-bold text-gray-600 text-2xl\">Profile</div>\r\n        <div className=\"cursor-pointer w-8 h-8 rounded-full border flex items-center justify-center\">\r\n          <svg\r\n            className=\"w-4 text-gray-200\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            viewBox=\"0 0 20 20\"\r\n            fill=\"currentColor\"\r\n          >\r\n            <path\r\n              fillRule=\"evenodd\"\r\n              d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\"\r\n              clipRule=\"evenodd\"\r\n            />\r\n          </svg>\r\n        </div>\r\n      </div>\r\n      {/* <!-- end profile header --> */}\r\n      {/* <!-- profile info --> */}\r\n      <div className=\"flex flex-col items-center pt-8\">\r\n        <div className=\"w-32 h-32 shadow-xl rounded-full overflow-hidden\">\r\n          <img\r\n            src={receiver.profile_img}\r\n            className=\"object-cover h-32 w-32\"\r\n            alt=\"\"\r\n          />\r\n        </div>\r\n        <div className=\"font-bold text-xl text-gray-600 pt-4\">\r\n          {receiver.name}\r\n        </div>\r\n        <div className=\"text-blue-700\">{receiver.email}</div>\r\n        <div className=\"text-sm text-gray-400\">{receiver.phone}</div>\r\n        <div className=\"mt-1 text-sm text-gray-400\">{receiver.location}</div>\r\n        <div className=\"flex items-center border-t-2 border-b-2 w-full px-4 py-4\">\r\n          <div className=\"font-bold mr-2 text-gray-600 text-sm\">6.4 Rating</div>\r\n          <div className=\"inline-block\">\r\n            <div className=\"flex flex-row\">\r\n              <svg\r\n                className=\"w-6 text-yellow-500\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                viewBox=\"0 0 20 20\"\r\n                fill=\"currentColor\"\r\n              >\r\n                <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\r\n              </svg>\r\n              <svg\r\n                className=\"w-6 text-yellow-500\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                viewBox=\"0 0 20 20\"\r\n                fill=\"currentColor\"\r\n              >\r\n                <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\r\n              </svg>\r\n              <svg\r\n                className=\"w-6 text-yellow-500\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                viewBox=\"0 0 20 20\"\r\n                fill=\"currentColor\"\r\n              >\r\n                <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\r\n              </svg>\r\n              <svg\r\n                className=\"w-6 text-yellow-500\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                viewBox=\"0 0 20 20\"\r\n                fill=\"currentColor\"\r\n              >\r\n                <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\r\n              </svg>\r\n              <svg\r\n                className=\"w-6 text-yellow-500\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                fill=\"none\"\r\n                viewBox=\"0 0 24 24\"\r\n                stroke=\"currentColor\"\r\n              >\r\n                <path\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                  strokeWidth=\"2\"\r\n                  d=\"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z\"\r\n                />\r\n              </svg>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* <!-- end profile info --> */}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport { NavBar } from \"../components\";\r\nimport { ChatContext } from \"../context\";\r\nimport { ChatHistory, ChatTemplate } from \"../template\";\r\nimport UserProfileInfo from \"../template/UserProfileInfo\";\r\n\r\nexport function MessagesPage() {\r\n  const { chat, receiver } = useContext(ChatContext);\r\n\r\n  return (\r\n    <>\r\n      <NavBar />\r\n      <ChatHistory />\r\n      {chat && <ChatTemplate chat={chat} />}\r\n      {chat && receiver && <UserProfileInfo receiver={receiver} />}\r\n    </>\r\n  );\r\n}\r\n","import axios from \"axios\";\r\nimport React, { useContext, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { useForm } from \"../utility/utility\";\r\nimport Loader from \"../components/loader/loader\";\r\nimport { UserContext } from \"../context\";\r\n\r\nexport function Register() {\r\n  const { setUser, setIsLoggedin, setIsAdmin } = useContext(UserContext);\r\n\r\n  const [values, setValues] = useForm({\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    cPassword: \"\",\r\n  });\r\n  const [error, setError] = useState(\"\");\r\n  const [isFetching, setIsFetching] = useState(false);\r\n\r\n  const history = useHistory();\r\n\r\n  const onSubmitForm = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      setIsFetching(true);\r\n\r\n      const config = {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      };\r\n      console.log(\"sending req\");\r\n\r\n      const res = await axios.post(\"/api/v1/user/register\", values, config);\r\n      if (res.status === 200) {\r\n        setUser(res.data.user);\r\n        setIsLoggedin(true);\r\n        // setIsAdmin(res.user.isAdmin)\r\n        setIsFetching(false);\r\n\r\n        history.replace(\"/messages\");\r\n      }\r\n    } catch (error) {\r\n      if (error.response && error.response.status === 400) {\r\n        setError(error.response.data.message);\r\n      }\r\n      setIsFetching(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"mt-10 mx-auto flex justify-center items-center text-gray-600\">\r\n      <div className=\"mx-8\">\r\n        <h1 className=\"font-bold text-4xl ml-4\">Register</h1>\r\n        <form className=\"my-4\" onSubmit={(e) => onSubmitForm(e)}>\r\n          <div className=\"flex flex-row items-center bg-white border-2 border-gray-200 py-2 px-3 mb-1 mt-4 rounded-md\">\r\n            <svg\r\n              className=\"w-5 flex-none text-gray-400\"\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              viewBox=\"0 0 20 20\"\r\n              fill=\"currentColor\"\r\n            >\r\n              <path\r\n                fillRule=\"evenodd\"\r\n                d=\"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z\"\r\n                clipRule=\"evenodd\"\r\n              />\r\n            </svg>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Full name\"\r\n              className=\"w-44 bg-transparent outline-none ml-2 text-sm\"\r\n              onChange={(e) => setValues(e)}\r\n              name=\"name\"\r\n            />\r\n          </div>\r\n          <div className=\"flex flex-row items-center bg-white border-2 border-gray-200 py-2 px-3 mb-1 mt-4 rounded-md\">\r\n            <svg\r\n              className=\"w-5 flex-none text-gray-400\"\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              viewBox=\"0 0 20 20\"\r\n              fill=\"currentColor\"\r\n            >\r\n              <path\r\n                fillRule=\"evenodd\"\r\n                d=\"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z\"\r\n                clipRule=\"evenodd\"\r\n              />\r\n            </svg>\r\n            <input\r\n              type=\"email\"\r\n              placeholder=\"Enter email\"\r\n              className=\"w-44 bg-transparent outline-none ml-2 text-sm\"\r\n              onChange={(e) => setValues(e)}\r\n              name=\"email\"\r\n              autoComplete={false}\r\n            />\r\n          </div>\r\n          <small className=\"text-gray-400 text-xs\">\r\n            We'll never share your email with anyone else.\r\n          </small>\r\n          <div className=\"flex flex-row items-center bg-white border-2 border-gray-200 py-2 px-3 mb-2 mt-4 rounded-md\">\r\n            <svg\r\n              className=\"w-5 flex-none text-gray-400\"\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              viewBox=\"0 0 20 20\"\r\n              fill=\"currentColor\"\r\n            >\r\n              <path\r\n                fillRule=\"evenodd\"\r\n                d=\"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z\"\r\n                clipRule=\"evenodd\"\r\n              />\r\n            </svg>\r\n            <input\r\n              onChange={(e) => setValues(e)}\r\n              type=\"password\"\r\n              name=\"password\"\r\n              placeholder=\"Enter password\"\r\n              className=\"w-44 bg-transparent outline-none ml-2 text-sm\"\r\n            />\r\n          </div>\r\n          <div className=\"flex flex-row items-center bg-white border-2 border-gray-200 py-2 px-3 mb-2 mt-4 rounded-md\">\r\n            <svg\r\n              className=\"w-5 flex-none text-gray-400\"\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              viewBox=\"0 0 20 20\"\r\n              fill=\"currentColor\"\r\n            >\r\n              <path\r\n                fillRule=\"evenodd\"\r\n                d=\"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z\"\r\n                clipRule=\"evenodd\"\r\n              />\r\n            </svg>\r\n            <input\r\n              onChange={(e) => setValues(e)}\r\n              type=\"password\"\r\n              name=\"cPassword\"\r\n              placeholder=\"Confirme password\"\r\n              className=\"w-44 bg-transparent outline-none ml-2 text-sm\"\r\n            />\r\n          </div>\r\n          <small className=\"h-16 text-xs text-red-400\">{error}</small>\r\n          {isFetching ? (\r\n            <Loader />\r\n          ) : (\r\n            <button\r\n              className=\"block mt-4 text-center p-2 w-48 bg-purple-600 rounded-md text-white m-auto\"\r\n              type=\"submit\"\r\n            >\r\n              Register\r\n            </button>\r\n          )}\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { NavBar } from \"../components\";\r\nimport Loader from \"../components/loader/loader\";\r\n\r\nimport { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useForm } from \"../utility/utility\";\r\nimport { useContext } from \"react\";\r\nimport { UserContext } from \"../context\";\r\n\r\nexport function Setting() {\r\n  const { user, setUser } = useContext(UserContext);\r\n  const [values, setValues] = useForm(user);\r\n  const [fetching, setFetching] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [file, setFile] = useState(null);\r\n  const [preview, setPreveiew] = useState(null);\r\n\r\n  const saveChanges = (e) => {\r\n    e.preventDefault();\r\n    setFetching(true);\r\n    const formData = new FormData();\r\n    formData.append(\"file\", file);\r\n    if (file != null) {\r\n      axios\r\n        .post(\"/api/v1/user/upload_pic\", formData, {\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data\",\r\n          },\r\n        })\r\n        .then((res) => {\r\n          setFetching(false);\r\n          // console.log(res.data);\r\n        })\r\n        .catch((err) => {\r\n          setFetching(false);\r\n          if (err.response.status === 400) {\r\n            setError(err.response.data.message);\r\n          } else {\r\n            setError(\"oops somthing went wrong!\");\r\n          }\r\n        });\r\n    }\r\n    axios\r\n      .post(\"/api/v1/user/information\", { values })\r\n      .then((res) => {\r\n        setFetching(false);\r\n        setUser(res.data.user);\r\n      })\r\n      .catch((err) => {\r\n        setFetching(false);\r\n        console.log(err);\r\n        setError(err);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <NavBar />\r\n      <section className=\"flex-auto\">\r\n        <div className=\"md:w-2/3 lg:w-3/5 mt-8 mx-auto\">\r\n          <div className=\"flex flex-col md:flex-row items-center  md:space-x-10\">\r\n            <div className=\"relative w-28\">\r\n              <label htmlFor=\"file\">\r\n                <svg\r\n                  className=\"w-6 h-6 rounded-full p-1 cursor-pointer bg-indigo-700 text-white absolute bottom-0 right-4\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  viewBox=\"0 0 20 20\"\r\n                  fill=\"currentColor\"\r\n                >\r\n                  <path d=\"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z\" />\r\n                </svg>\r\n              </label>\r\n              <div className=\"w-28 h-28 shadow-xl rounded-full overflow-hidden \">\r\n                <img\r\n                  src={preview || values.profile_img}\r\n                  className=\"object-cover h-28 w-28\"\r\n                  alt=\"\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"mt-4 text-center md:text-left\">\r\n              <h1 className=\"text-gray-800 text-2xl font-bold\">{user.name}</h1>\r\n              <p className=\"text-gray-300 text-sm\">{user.bio}</p>\r\n            </div>\r\n          </div>\r\n          <form onSubmit={(e) => saveChanges(e)}>\r\n            <input\r\n              type=\"file\"\r\n              name=\"file\"\r\n              onChange={(e) => {\r\n                setFile(e.target.files[0]);\r\n                setPreveiew(URL.createObjectURL(e.target.files[0]));\r\n              }}\r\n              id=\"file\"\r\n              className=\"hidden\"\r\n            />\r\n            <div className=\"grid md:grid-cols-2 md:grid-row-2 gap-4 mt-10 justify-items-center\">\r\n              <div>\r\n                <div>Name</div>\r\n                <input\r\n                  className=\"bg-white border-2 border-gray-200 mt-1 py-2 px-3 mb-1 rounded-md\r\n              w-56 bg-transparent outline-none text-sm\"\r\n                  type=\"text\"\r\n                  name=\"name\"\r\n                  placeholder=\"name...\"\r\n                  value={values.name}\r\n                  onChange={(e) => setValues(e)}\r\n                />\r\n              </div>\r\n              <div>\r\n                <div>bio</div>\r\n                <input\r\n                  className=\"bg-white border-2 border-gray-200 mt-1 py-2 px-3 mb-1 rounded-md\r\n              w-56 bg-transparent outline-none text-sm\"\r\n                  type=\"text\"\r\n                  name=\"bio\"\r\n                  placeholder=\"bio...\"\r\n                  value={values.bio}\r\n                  onChange={(e) => setValues(e)}\r\n                />\r\n              </div>\r\n              <div>\r\n                <div>phone</div>\r\n                <input\r\n                  className=\"bg-white border-2 border-gray-200 mt-1 py-2 px-3 mb-1 rounded-md\r\n              w-56 bg-transparent outline-none text-sm\"\r\n                  type=\"text\"\r\n                  name=\"phone\"\r\n                  placeholder=\"phone...\"\r\n                  value={values.phone}\r\n                  onChange={(e) => setValues(e)}\r\n                />\r\n              </div>\r\n              <div>\r\n                <div>Location</div>\r\n                <input\r\n                  className=\"bg-white border-2 border-gray-200 mt-1 py-2 px-3 mb-1 rounded-md\r\n              w-56 bg-transparent outline-none text-sm\"\r\n                  type=\"text\"\r\n                  name=\"location\"\r\n                  placeholder=\"location...\"\r\n                  value={values.location}\r\n                  onChange={(e) => setValues(e)}\r\n                />\r\n              </div>\r\n            </div>\r\n            {fetching ? (\r\n              <Loader />\r\n            ) : (\r\n              <button className=\"block w-72 bg-indigo-700 rounded-md text-center text-white font-bold py-2 cursor-pointer mx-auto mt-8\">\r\n                Save Changes\r\n              </button>\r\n            )}\r\n            {error && (\r\n              <p className=\"font-bold text-red-600 text-sm mt-4 text-center\">\r\n                {error}\r\n              </p>\r\n            )}\r\n          </form>\r\n        </div>\r\n      </section>\r\n    </>\r\n  );\r\n}\r\n","import axios from \"axios\";\r\nimport React from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { useContext } from \"react\";\r\nimport { Redirect, Route } from \"react-router-dom\";\r\nimport { UserContext } from \"../context\";\r\n\r\nexport default function AuthRoute({ children, ...rest }) {\r\n  const { isLoggedin, setUser, setIsLoggedin } = useContext(UserContext);\r\n  const [search, setSearch] = useState(false);\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(\"/api/v1/user\")\r\n      .then((res) => {\r\n        if (res.status === 200) {\r\n          setUser(res.data.user);\r\n          setIsLoggedin(true);\r\n          // setIsAdmin(res.data.isAdmin);\r\n          // socket_client.ioConnection(res.data.user._id);\r\n          setSearch(true);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        setSearch(true);\r\n        console.log(error);\r\n      });\r\n  }, []);\r\n  return (\r\n    search && (\r\n      <Route\r\n        {...rest}\r\n        render={({ location }) =>\r\n          isLoggedin ? (\r\n            children\r\n          ) : (\r\n            <Redirect\r\n              to={{\r\n                pathname: \"/login\",\r\n                state: { from: location },\r\n              }}\r\n            />\r\n          )\r\n        }\r\n      />\r\n    )\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Redirect,\r\n} from \"react-router-dom\";\r\nimport { Login, MessagesPage, Register, Setting } from \"../pages\";\r\nimport { Body } from \"../components\";\r\nimport AuthRoute from \"./authRoute\";\r\n\r\nexport default function Routes() {\r\n  return (\r\n    <Router>\r\n      <Body>\r\n        <Switch>\r\n          <Route path=\"/login\" exact>\r\n            <Login />\r\n          </Route>\r\n          <Route path=\"/register\" exact>\r\n            <Register />\r\n          </Route>\r\n          <AuthRoute path=\"/messages\" exact>\r\n            <MessagesPage />\r\n          </AuthRoute>\r\n          <AuthRoute path=\"/setting\" exact>\r\n            <Setting />\r\n          </AuthRoute>\r\n          <Redirect from=\"/*\" to=\"/messages\" />\r\n        </Switch>\r\n      </Body>\r\n    </Router>\r\n  );\r\n}\r\n","import axios from \"axios\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useContext } from \"react\";\r\nimport io from \"socket.io-client\";\r\nimport { ChatContext } from \"../context\";\r\n\r\nconst SocketContext = React.createContext();\r\n\r\nconst ENDPOINT = \"http://localhost:5005\";\r\n\r\nexport default function SocketProvider({ user, children }) {\r\n  const [socket, setSocket] = useState();\r\n  const { chat, setChat, chatList, setChatList } = useContext(ChatContext);\r\n\r\n  const addMessageToActiveChat = (msg) => {\r\n    // display the msg in the active chat\r\n    if (chat && chat._id === msg.chat) {\r\n      setChat({ ...chat, messages: [...chat.messages, msg] });\r\n    }\r\n  };\r\n  const addMessageToChatList = (msg) => {\r\n    // display the recent chat in the top of the chat history\r\n    const newChatList = chatList.filter((item) => item._id !== msg.chat);\r\n    const activeChat = chatList.find((item) => item._id === msg.chat);\r\n    if (!activeChat) {\r\n      axios\r\n        .get(`/api/v1/chat?limit=0&offset=10`)\r\n        .then((res) => {\r\n          if (res.status === 200) {\r\n            setChatList(res.data);\r\n          }\r\n        })\r\n        .catch((err) => console.log(err));\r\n    } else {\r\n      activeChat.lastMsg = msg;\r\n      newChatList.unshift(activeChat);\r\n      setChatList(newChatList);\r\n    }\r\n  };\r\n  const handleMessageStatusUpdate = (msg) => {\r\n    // display the msg in the active chat\r\n    if (chat && chat._id === msg.chat) {\r\n      let chatMsg = chat.messages;\r\n      chatMsg = chatMsg.filter(\r\n        (i) => !i._id.includes(\"msg\") && i._id !== msg._id\r\n      );\r\n      setChat({ ...chat, messages: [...chatMsg, msg] });\r\n    }\r\n    // display the recent chat in the top of the chat history\r\n    const newChatList = chatList.filter((item) => item._id !== msg.chat);\r\n    const activeChat = chatList.find((item) => item._id === msg.chat);\r\n    if (!activeChat) {\r\n      axios\r\n        .get(`/api/v1/chat?limit=0&offset=10`)\r\n        .then((res) => {\r\n          if (res.status === 200) {\r\n            setChatList(res.data);\r\n          }\r\n        })\r\n        .catch((err) => console.log(err));\r\n    } else {\r\n      activeChat.lastMsg = msg;\r\n      newChatList.unshift(activeChat);\r\n      setChatList(newChatList);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    console.log(\"useEffect socket provider\");\r\n    if (!user) return;\r\n    console.log(\"socket connection is ON\");\r\n    const newSocket = io(ENDPOINT, { query: { id: user._id, user } });\r\n    setSocket(newSocket);\r\n\r\n    return () => {\r\n      console.log(\"socket connection is OFF\");\r\n      newSocket.close();\r\n    };\r\n  }, [user]);\r\n  useEffect(() => {\r\n    if (socket == null) return;\r\n    socket.on(\"receive_message\", (msg) => {\r\n      console.log(\"receiving a message...\");\r\n      addMessageToChatList(msg);\r\n      addMessageToActiveChat(msg);\r\n      socket.emit(\"update_msg_status\", { msg, status: \"delivered\" });\r\n    });\r\n    socket.on(\"msg_status_updated\", ({ msg }) => {\r\n      console.log(`Update the message status to ${msg.status}`);\r\n      console.log(msg);\r\n      handleMessageStatusUpdate(msg);\r\n    });\r\n\r\n    return () => {\r\n      socket.off(\"receive_message\");\r\n      socket.off(\"msg_status_updated\");\r\n    };\r\n  }, [chat, chatList]);\r\n\r\n  return (\r\n    <SocketContext.Provider value={socket}>{children}</SocketContext.Provider>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\nimport Routes from \"./routes/routes\";\nimport { UserContext } from \"./context\";\nimport { ChatContext } from \"./context/ChatContext\";\n\nimport SocketProvider from \"./utility/SocketProvider\";\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [isLoggedin, setIsLoggedin] = useState(false);\n  const [isAdmin, setIsAdmin] = useState(false);\n  // Active chat\n  const [chat, setChat] = useState(null);\n  const [receiver, setReceiver] = useState(null);\n  const [chatList, setChatList] = useState([]);\n\n  return (\n    <UserContext.Provider\n      value={{\n        user,\n        isLoggedin,\n        isAdmin,\n        setUser,\n        setIsLoggedin,\n        setIsAdmin,\n      }}\n    >\n      <ChatContext.Provider\n        value={{\n          chat,\n          receiver,\n          chatList,\n          setChat,\n          setReceiver,\n          setChatList,\n        }}\n      >\n        <SocketProvider user={user}>\n          <Routes />\n        </SocketProvider>\n      </ChatContext.Provider>\n    </UserContext.Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./style/main.css\"\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}